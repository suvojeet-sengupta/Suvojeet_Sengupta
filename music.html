<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Music Videos - Suvojeet Sengupta</title>
    <meta name="description" content="A collection of music videos by Suvojeet Sengupta.">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸŽ¤</text></svg>">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <script>
        tailwind.config = {
            darkMode: 'class',
        }
        function toggleTheme() {
            document.documentElement.classList.toggle('dark');
            localStorage.setItem('theme', document.documentElement.classList.contains('dark') ? 'dark' : 'light');
        }
        if (localStorage.getItem('theme') === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark')
        } else {
            document.documentElement.classList.remove('dark')
        }
    </script>
</head>
<body class="bg-gray-100 dark:bg-gray-900 text-gray-800 dark:text-gray-200 font-sans">

    <div class="absolute top-5 right-5 z-10">
        <button onclick="toggleTheme()" class="p-2 rounded-full bg-white/20 text-white focus:outline-none">
            <i class="fas fa-moon dark:hidden"></i>
            <i class="fas fa-sun hidden dark:inline"></i>
        </button>
    </div>

    <!-- Header -->
    <header class="bg-gradient-to-r from-purple-600 to-indigo-700 text-white text-center py-20 relative">
        <div class="absolute inset-0 bg-black opacity-20"></div>
        <div class="relative">
            <h1 class="text-5xl font-bold">Music Collection</h1>
            <p class="mt-4 text-lg">Explore the melodies and stories behind the songs.</p>
        </div>
    </header>

    <main class="w-full max-w-7xl mx-auto p-8">
        <!-- Navigation -->
        <nav class="mb-12">
            <div class="flex justify-center space-x-4">
                <a href="index.html" class="px-4 py-2 font-semibold text-gray-800 dark:text-white bg-gray-200 dark:bg-gray-700 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-all duration-300">Home</a>
                <a href="music.html" class="px-4 py-2 font-bold text-white bg-gradient-to-r from-purple-600 to-indigo-700 rounded-lg transition-all duration-300">Music</a>
                <a href="about.html" class="px-4 py-2 font-semibold text-gray-800 dark:text-white bg-gray-200 dark:bg-gray-700 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-all duration-300">About Me</a>
            </div>
        </nav>

        <!-- Video Grid -->
        <!-- YouTube Videos Section -->
        <div id="youtube-videos-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10">
            <!-- Videos will be rendered here by JavaScript -->
        </div>
        
        <div id="youtube-videos-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10">
            <!-- Videos will be rendered here by JavaScript -->
        </div>
        <div class="flex justify-center mt-8 space-x-4">
            <button id="prevPage" class="px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors duration-300 disabled:opacity-50 disabled:cursor-not-allowed">Previous</button>
            <button id="nextPage" class="px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors duration-300 disabled:opacity-50 disabled:cursor-not-allowed">Next</button>
        </div>

        <script>
            const videosContainer = document.getElementById('youtube-videos-container');
            const prevButton = document.getElementById('prevPage');
            const nextButton = document.getElementById('nextPage');
            let allVideos = [];
            let currentPage = 0;
            const videosPerPage = 9; // From Python script

            async function loadVideosData() {
                try {
                    const response = await fetch('videos_data.json');
                    allVideos = await response.json();
                    renderVideos();
                } catch (error) {
                    console.error('Error loading videos data:', error);
                    videosContainer.innerHTML = '<p class="text-red-500">Failed to load videos. Please try again later.</p>';
                }
            }

            function renderVideos() {
                videosContainer.innerHTML = ''; // Clear current videos
                const start = currentPage * videosPerPage;
                const end = start + videosPerPage;
                const videosToRender = allVideos.slice(start, end);

                if (videosToRender.length === 0 && allVideos.length > 0 && currentPage > 0) {
                    // If we navigated to an empty page, go back one
                    currentPage--;
                    renderVideos();
                    return;
                }

                if (videosToRender.length === 0 && allVideos.length === 0) {
                    videosContainer.innerHTML = '<p class="text-gray-500">No videos found.</p>';
                    prevButton.disabled = true;
                    nextButton.disabled = true;
                    return;
                }

                videosToRender.forEach(video => {
                    const videoCard = `
                        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden transform hover:-translate-y-2 transition-transform duration-300">
                            <div class="relative w-full" style="padding-top: 56.25%;">
                                <iframe class="absolute top-0 left-0 w-full h-full" src="https://www.youtube.com/embed/${video.id}" title="${video.title}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                            </div>
                            <div class="p-6">
                                <h3 class="text-xl font-bold mb-2"><a href="${video.url}" target="_blank" rel="noopener noreferrer">${video.title}</a></h3>
                                <p class="text-gray-600 dark:text-gray-400 text-sm">Uploaded: ${video.formatted_date}</p>
                                <div class="mt-4 text-gray-700 dark:text-gray-300 text-sm">
                                    <p class="description line-clamp-3" style="white-space: pre-wrap;">${video.description}</p>
                                    <button class="text-purple-600 dark:text-purple-400 hover:underline focus:outline-none view-more-btn">View more</button>
                                </div>
                            </div>
                        </div>
                    `;
                    videosContainer.innerHTML += videoCard;
                });

                // Add event listeners for the "View more" buttons
                document.querySelectorAll('.view-more-btn').forEach(button => {
                    button.addEventListener('click', event => {
                        const description = event.target.previousElementSibling;
                        description.classList.toggle('line-clamp-3');
                        if (description.classList.contains('line-clamp-3')) {
                            event.target.textContent = 'View more';
                        } else {
                            event.target.textContent = 'View less';
                        }
                    });
                });

                // Update button states
                prevButton.disabled = currentPage === 0;
                nextButton.disabled = (currentPage + 1) * videosPerPage >= allVideos.length;
            }

            // Event Listeners
            prevButton.addEventListener('click', () => {
                if (currentPage > 0) {
                    currentPage--;
                    renderVideos();
                    window.scrollTo({ top: videosContainer.offsetTop - 100, behavior: 'smooth' }); // Scroll to top of videos
                }
            });

            nextButton.addEventListener('click', () => {
                if ((currentPage + 1) * videosPerPage < allVideos.length) {
                    currentPage++;
                    renderVideos();
                    window.scrollTo({ top: videosContainer.offsetTop - 100, behavior: 'smooth' }); // Scroll to top of videos
                }
            });

            // Initial load
            document.addEventListener('DOMContentLoaded', loadVideosData);
        </script>
        
        
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white text-center py-8 mt-16">
        <div class="flex justify-center space-x-6 mb-4">
            <a href="https://www.instagram.com/suvojeet__sengupta?igsh=MWhyMXE4YzhxaDVvNg==" class="hover:text-purple-400 transition-colors duration-300"><i class="fab fa-instagram fa-2x"></i></a>
            <a href="https://youtube.com/@suvojeetsengupta?si=xmXfnPFgxoYOzuzq" class="hover:text-purple-400 transition-colors duration-300"><i class="fab fa-youtube fa-2x"></i></a>
            <a href="https://www.facebook.com/suvojeetsengupta21" class="hover:text-purple-400 transition-colors duration-300"><i class="fab fa-facebook fa-2x"></i></a>
        </div>
        <p>&copy; 2025 Suvojeet Sengupta. All Rights Reserved.</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const videoCards = document.querySelectorAll('.grid > div[class*="bg-white"]');

            videoCards.forEach(async (card) => {
                const iframe = card.querySelector('iframe');
                const titleElement = card.querySelector('h3');

                if (iframe && titleElement) {
                    const videoSrc = iframe.src;
                    const videoIdMatch = videoSrc.match(/embed\/([^?&]+)/);
                    const videoId = videoIdMatch ? videoIdMatch[1] : null;

                    if (videoId) {
                        const originalTitle = titleElement.textContent;
                        titleElement.textContent = 'Loading title...';
                        try {
                            const response = await fetch(`https://noembed.com/embed?url=https://www.youtube.com/watch?v=${videoId}`);
                            if (!response.ok) {
                                throw new Error('Network response was not ok');
                            }
                            const data = await response.json();
                            if (data.title) {
                                titleElement.textContent = data.title;
                            } else {
                                titleElement.textContent = originalTitle;
                            }
                        } catch (error) {
                            console.error('Failed to fetch video title for video ID:', videoId, error);
                            titleElement.textContent = originalTitle;
                        }
                    }
                }
            });
        });
    </script>

</body>
</html>